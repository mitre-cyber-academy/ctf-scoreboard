FactoryBot.define do
  factory :pentest_solved_challenge, parent: :feed_item, class: 'PentestSolvedChallenge' do
    team { create(:team) }
    division { team.division }
    challenge { create(:pentest_challenge_with_flags) }
    flag { challenge.defense_flags.joins(:team).where(teams: {division: division}).where.not(team: team).sample }
  end
end
