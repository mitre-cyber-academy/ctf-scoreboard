language: ruby
# Use travis CI Docker Infrastructure
sudo: false
cache: bundler
notifications:
  email: false
  slack:
    rooms:
      secure: BU22IQqojSJwkLBpLF4y2+BgEPUaZ7cdxRExsdWqDCoXGKSVBFY1I0/E4qm+abPZzSUqfvx8CC2hRqvdtymAmHbew6L8K+yDfdmBKwug3WRXWBqy65xWdQBQlvnYhmn7WfstbVYb2xHQj3YE+ZtNPI0UmJRUYdAJLI2qlzOjes8=
    on_success: change
    on_failure: always
services:
  - postgresql
before_install:
  - gem update --system
  - gem --version
before_script:
  - psql -c 'create database registration_test;' -U postgres
script:
- bundle exec brakeman -qAzw1
- bundle exec bundle-audit check --update --ignore CVE-2016-10735 CVE-2019-8331
- bundle exec rake test
- bundle exec rubocop
