%thead
  %tr
    - @table_heading.each do |challenge|
      %th{ :style => "text-align:center;width:#{heading_width(@table_heading)}%;" }= challenge.name
%tbody
  - @teams_with_assoc.each do |team, flag_and_challenge|
    %tr{style: cell_background_color(team)}
      %td{style: 'text-align:center;'}
        = team
      - flag_and_challenge.each do |pair|
        - unless pair[:flag].nil?
          = render partial: 'pentest_challenge',
            locals: { flag: pair[:flag], challenge: pair[:challenge], defense_team: get_team_by_name(@headings, team) }
        - else
          %td &nbsp;
