%h3 Attack Challenges
%table.table.table-bordered.table-bolded
  %thead
    %tr
      - @attack_table_heading.each do |challenge|
        %th.text-center{ style: "width:#{heading_width(@attack_table_heading)}%;" }= challenge.name
  %tbody
    - @teams_with_assoc.each do |team, flag_and_challenge|
      %tr{style: cell_background_color(team)}
        %td.text-center= team
        - flag_and_challenge.each do |pair|
          - unless pair[:flag].nil?
            = render partial: 'pentest_challenge',
              locals: { flag: pair[:flag], challenge: pair[:challenge], defense_team: get_team_by_name(@headings, team) }
          - else
            %td &nbsp;
%hr
%h3 Design Phase Challenges
%table.table.table-bordered.table-bolded
  %thead
    %tr
      - @design_table_heading.each do |challenge|
        %th.text-center{ style: "width:#{heading_width(@design_table_heading)}%;" }= challenge.name
  %tbody
    - @headings.each do |team|
      %tr
        %td.text-center= team.team_name
        - @design_phase_challenges.each do |challenge|
          - if challenge.can_be_solved_by(team, challenge.flags.first)
            - if current_user&.team.eql? team
              %td.text-center= always_link_to_if_admin(challenge.open?, 'Click to Solve', game_challenge_path(challenge))
            - else
              %td.text-center -
          - else
            - if current_user&.team.eql? team
              %td.text-center= always_link_to_if_admin(challenge.open?, 'Solved', game_challenge_path(challenge), style: "color:inherit;")
            - else
              %td.text-center Solved
